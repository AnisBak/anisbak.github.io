<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="ascii.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="animations.js" type="text/javascript"></script>
    <script src="ascii.js" type="text/javascript"></script>
    <title>ASCII Animation</title>
</head>

<body>
   
    <div>
        <div id="header">CS472: ASCII Animation Viewer</div>
        <div> <textarea id="animation" name="" cols="80" rows="20"></textarea></div>
        <div id="controls">
            <fieldset>
                <legend>Play Controls:</legend>
                <button id="start">Start</button>
                <button id="stop">Stop</button>
            </fieldset>
            <fieldset>
                <legend>Animation:</legend>
                <select name="" id="selec">
                    <option value="BLANK" >BLANK</option>
                    <option value="BIKE" selected>BIKE</option>
                    <option value="DIVE">DIVE</option>
                    <option value="JUGGLER">JUGGLER</option>
                    <option value="EXERCISE">EXERCISE</option>
                </select>
            </fieldset>
            <fieldset>
                <legend>Size:</legend>
                <select name="" id="size">
                    <option value="7pt">Tiny</option>
                    <option value="12pt" selected>Medium</option>
                    <option value="16pt"> Large</option>
                    <option value="24pt">Extra Large</option>
                    <option value="32pt">XXL</option>
                </select>
            </fieldset>
            <fieldset>
                <legend>Speed:</legend>
                <label for=""><input type="checkbox" id="speed"> Turbo</label>
            </fieldset>
        </div>
    </div>
    <script>
        var option;
        var size;
        var speed = 250;
        var id, id2;
        function myAnim() {
            if ($("#selec").val() !== "BLANK") {
                let txt = ANIMATIONS[option].split("=====\n");
                var xCnt = -1;
                id = window.setInterval(function animateOneByOne() {

                    xCnt += 1;
                    if (xCnt < txt.length) {
                        $("#animation")
                            .val("")
                            .val(txt[xCnt])
                            .animateOneByOne();
                    }
                    else
                        xCnt = -1
                }, speed);
                $("#start").off("click");
                animateOneByOne();
            }

        }
        $(document).ready(function () {
            
            var textValue = ""; 
            option = $("#selec").val();

            $("#start").on("click", function(){
                if ($("#speed").is(':checked')) {
                    speed = 50;
                    myAnim();
                }
                else {
                    speed = 250;
                    myAnim();
                }
                size = $("#size").val();
                $("#animation").val("");
                myAnim();
            });

            $("#stop").click(function () {
                $("#start").on("click", myAnim);
                window.clearInterval(id);
                $("#animation").val(textValue);
            });

            $("#animation").on("keyup keydown paste", function () {
                textValue = $(this).val();
            });
            $("#selec").on("change", function () {
                option = $(this).val();
            });
            $("#size").on("change", function () {
                size = $(this).val();
                $("#animation").css("font-size", size);
            });

            $("#speed").click(function () {
                window.clearInterval(id);
                if ($(this).is(':checked')) {
                    speed = 50;
                    myAnim();
                }
                else {
                    speed = 250;
                    myAnim();
                }

            });

        });
    </script>
</body>

</html>